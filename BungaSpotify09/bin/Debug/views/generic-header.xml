<?
function make_album (album, size)
?>
<hbox minHeight="202" padding="12,12,12,12">
	<vbox width="${size}">
	<img src="${album.image}" width="${size}" height="${size}" uri="${album.uri}" />
	<box flex="1"><text></text></box>
	</vbox>
	<playlist>
		<link uri="${album.uri}">${album.name}</link>
		% for track in enum(album.tracks) do
		<track 	uri="${track.uri}" 
				name="${track.name}" />
		% end
		% if album.copyright then
		<text>${album.copyright}</text>
		% end
	</playlist>
</hbox>
<?

end
function enum(o)
	local e = o:GetEnumerator()
	return function()
		if e:MoveNext() then
			return e.Current
		end
	end
end
?>